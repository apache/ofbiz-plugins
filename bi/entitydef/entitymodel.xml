<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
    <!-- ========================================================= -->
    <!-- ======================== Defaults ======================= -->
    <!-- ========================================================= -->
    <title>OLAP entities</title>
    <description>None</description>

    <!-- ========================================================= -->
    <!-- Dimensions                                                -->
    <!-- ========================================================= -->
    <entity entity-name="AssetDimension" package-name="org.apache.ofbiz.bi.dimension" title="Assets Dimension">
        <description>Dimension of assets. The natural key is [fixedAssetId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Asset dimension record</description>
        </field>
        <field name="fixedAssetId" type="id">
            <description>The natural key. From FixedAsset.fixedAssetId</description>
        </field>
        <field name="fixedAssetName" type="description">
            <description>Name of the fixed asset.</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="CarrierDimension" package-name="org.apache.ofbiz.bi.dimension" title="Carriers Dimension">
        <description>Dimension of carriers. The natural key is [partyId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Carrier dimension record</description>
        </field>
        <field name="partyId" type="id">
            <description>The natural key. From PartyRoleAndPartyDetail.partyId</description>
        </field>
        <field name="partyName" type="description">
            <description>Name of the customer. From PartyRoleAndPartyDetail. Dependent on PartyTypeId</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="CountryDimension" package-name="org.apache.ofbiz.bi.dimension" title="Countries Dimension">
        <description>Dimension of countries. The natural key is [countryId]</description>
        <field name="dimensionId" type="id">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="countryId" type="id">
            <description>The country id (natural key). The ISO 3166-1 alpha-3 code of the Country</description>
        </field>
        <field name="countryCode" type="short-varchar">
            <description>The ISO 3166-1 alpha-2 code of the Country</description>
        </field>
        <field name="countryNumCode" type="short-varchar">
            <description>The ISO 3166-1 numeric code of the Country</description>
        </field>
        <field name="countryName" type="description">
            <description>The name of the Country</description>
        </field>
        <field name="countryTeleCode" type="short-varchar">
            <description>The country calling code of the Country</description>
        </field>
        <field name="tld" type="short-varchar">
            <description>The country code top-level domain of the Country</description>
        </field>
        <field name="description" type="description">
            <description>description of the record</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="CurrencyDimension" package-name="org.apache.ofbiz.bi.dimension" title="Currencies Dimension">
        <description>Dimension of currencies. The natural key is [currencyId]</description>
        <field name="dimensionId" type="id">
            <description>Unique identifier of the Currency dimension record</description>
        </field>
        <field name="currencyId" type="id">
            <description>The currency id (natural key).</description>
        </field>
        <field name="description" type="description">
            <description>description of the record</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="CustomerDimension" package-name="org.apache.ofbiz.bi.dimension" title="Customers Dimension">
        <description>Dimension of customers. The natural key is [partyId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Customer dimension record</description>
        </field>
        <field name="partyId" type="id">
            <description>The natural key. From PartyRoleAndPartyDetail.partyId</description>
        </field>
        <field name="partyName" type="description">
            <description>Name of the customer. From PartyRoleAndPartyDetail. Dependent on PartyTypeId</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="DateDimension" package-name="org.apache.ofbiz.bi.dimension" title="Dates Dimension">
        <description>Dimension of dates. The natural key is [dateValue]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Date dimension record</description>
        </field>
        <field name="dateValue" type="date">
            <description>The date (day)</description>
        </field>
        <field name="description" type="description">
            <description>Full date description</description>
        </field>
        <field name="dayName" type="short-varchar">
            <description>The name of the day (Monday, Tuesday, etc...)</description>
        </field>
        <field name="dayOfMonth" type="numeric">
            <description>The number of the day in the month</description>
        </field>
        <field name="dayOfYear" type="numeric">
            <description>The number of the day in the year</description>
        </field>
        <field name="monthName" type="short-varchar">
            <description>The name of the month (January, February, etc...)</description>
        </field>
        <field name="monthOfYear" type="numeric">
            <description>The number of the month (1-12)</description>
        </field>
        <field name="yearName" type="numeric">
            <description>The year (2008, 2009, etc...)</description>
        </field>
        <field name="weekOfMonth" type="numeric">
            <description>The number of the week in the month</description>
        </field>
        <field name="weekOfYear" type="numeric">
            <description>The number of the week in the year</description>
        </field>
        <field name="yearMonthDay" type="short-varchar">
            <description>YYYY-MM-DD</description>
        </field>
        <field name="yearAndMonth" type="short-varchar">
            <description>YYYY-MM</description>
        </field>
        <field name="weekdayType" type="short-varchar">
            <description>Weekday indicator (Weekday or Weekend)</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="FacilityDimension" package-name="org.apache.ofbiz.bi.dimension" title="Facilities Dimension">
        <description>Dimension of facilities. The natural key is [facilityId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="facilityId" type="id">
            <description>The natural key. From facility.facilityId</description>
        </field>
        <field name="facilityName" type="description">
            <description>The name of the facility</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="OrganisationDimension" package-name="org.apache.ofbiz.bi.dimension" title="Internal Organisations Dimension">
        <description>Dimension of internal (accounting) parties. The natural key is [partyId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="partyId" type="id">
            <description>The natural key. From party.partyId</description>
        </field>
        <field name="partyName" type="description">
            <description>The name of the party</description>
        </field>
        <field name="baseCurrencyDimId" type="id">
            <description>the currency of the organisaiton.</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="ProductDimension" package-name="org.apache.ofbiz.bi.dimension" title="Products Dimension">
        <description>Dimension of Products. The natural key is [productId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Product dimension record</description>
        </field>
        <field name="productId" type="id">
            <description>The natural key. From Product.productId</description>
        </field>
        <field name="productType" type="description">
            <description>The product type. From ProductType.description</description>
        </field>
        <field name="internalName" type="description">
            <description>The internal name of the product</description>
        </field>
        <field name="brandName" type="name">
            <description>The brand name of the prdouct</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="SupplierDimension" package-name="org.apache.ofbiz.bi.dimension" title="Suppliers Dimension">
        <description>Dimension of customers. The natural key is [partyId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Supplier dimension record</description>
        </field>
        <field name="partyId" type="id">
            <description>The natural key. From PartyRoleAndPartyDetail.partyId</description>
        </field>
        <field name="partyName" type="description">
            <description>Name of the supplier. From PartyRoleAndPartyDetail. Dependent on PartyTypeId</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="ProjectDimension" package-name="org.apache.ofbiz.bi.dimension" title="Projects Dimension">
        <description>Dimension of projects. The natural key is [workEffortId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the Project dimension record</description>
        </field>
        <field name="projectId" type="id">
            <description>The natural key. From WorkEffort.workEffortId</description>
        </field>
        <field name="projectName" type="description">
            <description>Name of the project. From WorkEffort.workEffortName</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="ProjectTaskDimension" package-name="org.apache.ofbiz.bi.dimension" title="Project Tasks Dimension">
        <description>Dimension of project tasks. The natural key is [workEffortId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the ProjectTask dimension record</description>
        </field>
        <field name="projectTaskId" type="id">
            <description>The natural key. From WorkEffort.workEffortId</description>
        </field>
        <field name="projectTaskName" type="description">
            <description>Name of the project task. From WorkEffort.workEffortName</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="SalesChannelDimension" package-name="org.apache.ofbiz.bi.dimension" title="Sales Channels Dimension">
        <description>Dimension of sales channels. The natural key is [enumId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="salesChannelId" type="id">
            <description>The natural key. From Enumeration.enumId</description>
        </field>
        <field name="description" type="description">
            <description>Description. From Enumeration.description.</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="StoreDimension" package-name="org.apache.ofbiz.bi.dimension" title="Stores Dimension">
        <description>Dimension of stores. The natural key is [productStoreId]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="productStoreId" type="id">
            <description>The natural key. From ProductStore.productStoreId</description>
        </field>
        <field name="storeName" type="description">
            <description>Name of the store. From ProductStore.storeName.</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>
    <entity entity-name="TimeDimension" package-name="org.apache.ofbiz.bi.dimension" title="Times Dimension">
        <description>Dimension of time slots. The natural key is [hh:mm]</description>
        <field name="dimensionId" type="integer">
            <description>Unique identifier of the dimension record</description>
        </field>
        <field name="timeValue" type="time">
            <description>The natural key (hh:mm).</description>
        </field>
        <field name="hr" type="integer">
            <description>The hour value</description>
        </field>
        <field name="mn" type="integer">
            <description>The minute value</description>
        </field>
        <field name="description" type="description">
            <description>Description of the record</description>
        </field>
        <prim-key field="dimensionId"/>
    </entity>

    <!-- ========================================================= -->
    <!-- Facts                                                     -->
    <!-- ========================================================= -->

    <entity entity-name="SalesInvoiceItemFact" package-name="org.apache.ofbiz.bi.fact" title="Sales Invoice Item Fact">
        <description>A transaction fact entity with invoice item grain.</description>
        <field name="invoiceId" type="id">
            <description>The invoice Id. A degenerate dimension</description>
        </field>
        <field name="invoiceItemSeqId" type="id">
            <description>The invoice line item. A degenerate dimension</description>
        </field>
        <field name="orderId" type="id">
            <description>The associated order. A degenerate dimension</description>
        </field>
        <field name="invoiceDateDimId" type="integer">
            <description>The date of the invoice</description>
        </field>
        <field name="organisationDimId" type="integer">
            <description>The associated internal organisation</description>
        </field>
        <field name="customerDimId" type="integer">
            <description>The associated customer</description>
        </field>
        <field name="origCurrencyDimId" type="id">
            <description>The currency of the invoice</description>
        </field>
        <field name="productDimId" type="integer">
            <description>The associated product</description>
        </field>
        <field name="quantity" type="fixed-point">
            <description>Quantity invoiced. From InvoiceItem.quantity</description>
        </field>
        <field name="amount" type="fixed-point">
            <description>Amount invoiced. From InvoiceItem.amount</description>
        </field>
        <field name="extGrossAmount" type="currency-precise">
            <description>Extended gross amount: quantity invoiced multiplied by the list unit price.</description>
        </field>
        <field name="extDiscountAmount" type="currency-precise">
            <description>Extended discount amount.</description>
        </field>
        <field name="extNetAmount" type="currency-precise">
            <description>Extended net amount: gross amount less discounts.</description>
        </field>
        <field name="extTaxAmount" type="currency-precise">
            <description>Extended tax amount.</description>
        </field>
        <field name="extManFixedCost" type="currency-precise">
            <description>Extended manufacturing fixed cost.</description>
        </field>
        <field name="extManVarCost" type="currency-precise">
            <description>Extended manufacturing variable cost.</description>
        </field>
        <field name="extStorageCost" type="currency-precise">
            <description>Extended storage cost.</description>
        </field>
        <field name="extDistributionCost" type="currency-precise">
            <description>Extended distribution cost.</description>
        </field>
        <field name="contributionAmount" type="currency-precise">
            <description>Extended net amount less all the costs.</description>
        </field>
        <!--
        TODO: implement multi-currency fields
        <field name="extGrossAmountOrig" type="currency-precise">
            <description>Extended gross amount in the original currency: quantity invoiced multiplied by the list unit price.</description>
        </field>
        <field name="extDiscountAmountOrig" type="currency-precise">
            <description>Extended discount amount in the original currency.</description>
        </field>
        <field name="extNetAmountOrig" type="currency-precise">
            <description>Extended net amount in the original currency: gross amount less discounts.</description>
        </field>
        <field name="extManFixedCostOrig" type="currency-precise">
            <description>Extended manufacturing fixed cost in the original currency.</description>
        </field>
        <field name="extManVarCostOrig" type="currency-precise">
            <description>Extended manufacturing variable cost in the original currency.</description>
        </field>
        <field name="extStorageCostOrig" type="currency-precise">
            <description>Extended storage cost in the original currency.</description>
        </field>
        <field name="extDistributionCostOrig" type="currency-precise">
            <description>Extended distribution cost in the original currency.</description>
        </field>
        <field name="contributionAmountOrig" type="currency-precise">
            <description>Extended net amount less all the costs in the original currency.</description>
        </field>
        -->

        <prim-key field="invoiceId"/>
        <prim-key field="invoiceItemSeqId"/>

        <relation type="one" fk-name="SIIF_INVDATE" rel-entity-name="DateDimension">
            <key-map field-name="invoiceDateDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SIIF_CURRENCY" rel-entity-name="CurrencyDimension">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SIIF_CUSTOMER" rel-entity-name="CustomerDimension">
            <key-map field-name="customerDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SIIF_INTORG" rel-entity-name="OrganisationDimension">
            <key-map field-name="organisationDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SIIF_PRODUCT" rel-entity-name="ProductDimension">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </relation>
    </entity>

    <entity entity-name="SalesOrderItemFact" package-name="org.apache.ofbiz.bi.fact.order" title="Sales Order Item Fact">
        <description>A transaction fact entity with order item grain.</description>
        <field name="orderId" type="id">
            <description>The order id. A degenerate dimension</description>
        </field>
        <field name="orderItemSeqId" type="id">
            <description>The order line item. A degenerate dimension</description>
        </field>
        <field name="orderDateDimId" type="integer">
            <description>The date of the order</description>
        </field>
        <field name="organisationDimId" type="integer">
            <description>The associated internal organisation</description>
        </field>
        <field name="customerDimId" type="integer">
            <description>The associated customer</description>
        </field>
        <field name="storeDimId" type="integer">
            <description>The associated store</description>
        </field>
        <field name="productDimId" type="integer">
            <description>The associated product</description>
        </field>
        <field name="origCurrencyDimId" type="id">
            <description>The associated currency</description>
        </field>
        <field name="productCategoryId" type="id"></field>
        <field name="salesChannelEnumId" type="id"></field>
        <field name="statusId" type="id"></field>

        <field name="brand" type="name"></field>
        <field name="pod" type="name"></field>
        <field name="account" type="name"></field>

        <field name="quantity" type="fixed-point">
            <description>Quantity order. From OrderItem.quantity</description>
        </field>

        <field name="extGrossAmount" type="currency-precise">
            <description>Extended gross amount: quantity item multiplied by the unit price.</description>
        </field>
        <field name="extGrossCost" type="currency-precise">
            <description>Extended gross cost: quantity item multiplied by the last price.</description>
        </field>
        <field name="extDiscountAmount" type="currency-precise">
            <description>Extended discount amount.</description>
        </field>
        <field name="extNetAmount" type="currency-precise">
            <description>Extended net amount: gross amount less discounts.</description>
        </field>
        <field name="extShippingAmount" type="currency-precise">
            <description>Extended shipping amount.</description>
        </field>
        <field name="extTaxAmount" type="currency-precise">
            <description>Extended tax amount.</description>
        </field>

        <field name="GS" type="currency-precise">
            <description>Gross Sales: Gross Amount plus Shipping Amount.</description>
        </field>
        <field name="GMS" type="currency-precise">
            <description>Gross Merchandize Sales: Gross Amount.</description>
        </field>
        <field name="GMP" type="currency-precise">
            <description>Gross Merchandize Profit: Gross Merchandize Sales less Gross Cost.</description>
        </field>
        <field name="GSS" type="currency-precise">
            <description>Gross Shipping Sales: Shipping Amount</description>
        </field>
        <field name="GSC" type="currency-precise">
            <description>Gross Shipping Cost</description>
        </field>
        <field name="GSP" type="currency-precise">
            <description>Gross Shipping Profit: Gross Shipping Sales less Gross Shipping Cost.</description>
        </field>
        <field name="GP" type="currency-precise">
            <description>Gross Profit: Gross Merchandize Profit less Gross Shipping Profit.</description>
        </field>

        <field name="countOrder" type="fixed-point">
            <description>Count of order.</description>
        </field>
        <field name="productPromoCode" type="id">
            <description>Product promotion Code.</description>
        </field>

        <prim-key field="orderId"/>
        <prim-key field="orderItemSeqId"/>

        <relation type="one" fk-name="SOIF_ORDERDATE" rel-entity-name="DateDimension">
            <key-map field-name="orderDateDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SOIF_CURRENCY" rel-entity-name="CurrencyDimension">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="SOIF_PRODUCT" rel-entity-name="ProductDimension">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </relation>

    </entity>

    <entity entity-name="InventoryItemFact" package-name="org.apache.ofbiz.bi.fact" title="Inventory Item Fact">
        <description>A transaction fact entity with inventory items.</description>
        <field name="inventoryItemId" type="id"></field>
        <field name="inventoryDateDimId" type="integer"></field>
        <field name="organisationDimId" type="integer"></field>
        <field name="origCurrencyDimId" type="id"></field>
        <field name="facilityDimId" type="integer"></field>
        <field name="productDimId" type="integer"></field>
        <field name="quantityOnHandTotal" type="fixed-point"></field>
        <field name="availableToPromiseTotal" type="fixed-point"></field>
        <field name="unitCost" type="fixed-point"></field>
        <field name="soldoutAmount" type="fixed-point"></field>

        <prim-key field="inventoryItemId"/>

        <relation type="one" fk-name="IIF_INVCURRENCY" rel-entity-name="CurrencyDimension">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="IIF_INVDATE" rel-entity-name="DateDimension">
            <key-map field-name="inventoryDateDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="IIF_INVFACILITY" rel-entity-name="FacilityDimension">
            <key-map field-name="facilityDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="IIF_INVINTORG" rel-entity-name="OrganisationDimension">
            <key-map field-name="organisationDimId" rel-field-name="dimensionId"/>
        </relation>
        <relation type="one" fk-name="IIF_INVPRODUCT" rel-entity-name="ProductDimension">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </relation>
    </entity>

    <!-- ========================================================= -->
    <!-- Star Schemas                                              -->
    <!-- ========================================================= -->

    <view-entity entity-name="SalesInvoiceItemStarSchema" package-name="org.apache.ofbiz.bi.starschema" title="Sales Invoice Item Star Schema">
        <description>Invoice Item star schema (Profit and Loss Statement).</description>

        <member-entity entity-alias="SIISS_SIIF" entity-name="SalesInvoiceItemFact"/>
        <member-entity entity-alias="SIISS_IDD" entity-name="DateDimension"/>
        <member-entity entity-alias="SIISS_CUSTOMER" entity-name="CustomerDimension"/>
        <member-entity entity-alias="SIISS_INTORG" entity-name="OrganisationDimension"/>
        <member-entity entity-alias="SIISS_PD" entity-name="ProductDimension"/>
        <member-entity entity-alias="SIISS_CD" entity-name="CurrencyDimension"/>

        <alias-all entity-alias="SIISS_IDD" prefix="invoiceDate" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SIISS_CUSTOMER" prefix="customer" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SIISS_INTORG" prefix="intOrg" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SIISS_PD" prefix="product" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SIISS_CD" prefix="currency" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SIISS_SIIF" function="sum">
            <exclude field="customerDimId"/>
            <exclude field="invoiceId"/>
            <exclude field="invoiceItemSeqId"/>
            <exclude field="invoiceDateDimId"/>
            <exclude field="orderId"/>
            <exclude field="organisationDimId"/>
            <exclude field="origCurrencyDimId"/>
            <exclude field="productDimId"/>
        </alias-all>
        <alias entity-alias="SIISS_SIIF" name="invoiceId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="invoiceItemSeqId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="invoiceDateDimId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="origCurrencyDimId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="orderId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="organisationDimId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="customerDimId" group-by="true"/>
        <alias entity-alias="SIISS_SIIF" name="productDimId" group-by="true"/>

        
        <view-link entity-alias="SIISS_SIIF" rel-entity-alias="SIISS_CUSTOMER">
            <key-map field-name="customerDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SIISS_SIIF" rel-entity-alias="SIISS_IDD">
            <key-map field-name="invoiceDateDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SIISS_SIIF" rel-entity-alias="SIISS_INTORG">
            <key-map field-name="organisationDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SIISS_SIIF" rel-entity-alias="SIISS_CD">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SIISS_SIIF" rel-entity-alias="SIISS_PD">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </view-link>
    </view-entity>

    <view-entity entity-name="SalesOrderItemStarSchema" package-name="org.apache.ofbiz.bi.starschema" title="Sales Order Item Star Schema">
        <description>Order Item star schema (Profit and Loss Statement).</description>

        <member-entity entity-alias="SOISS_SOIF" entity-name="SalesOrderItemFact"/>
        <member-entity entity-alias="SOISS_CD" entity-name="CurrencyDimension"/>
        <member-entity entity-alias="SOISS_CUSTD" entity-name="CustomerDimension"/>
        <member-entity entity-alias="SOISS_DD" entity-name="DateDimension"/>
        <member-entity entity-alias="SOISS_INTORGD" entity-name="OrganisationDimension"/>
        <member-entity entity-alias="SOISS_STORED" entity-name="StoreDimension"/>
        <member-entity entity-alias="SOISS_PD" entity-name="ProductDimension"/>

        <alias-all entity-alias="SOISS_CD" prefix="currency" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SOISS_CUSTD" prefix="customer" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SOISS_DD" prefix="date" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SOISS_INTORGD" prefix="intOrg" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SOISS_STORED" prefix="store" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="SOISS_PD" prefix="product" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>

        <alias-all entity-alias="SOISS_SOIF" function="sum">
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
            <exclude field="orderDateDimId"/>
            <exclude field="organisationDimId"/>
            <exclude field="customerDimId"/>
            <exclude field="productDimId"/>
            <exclude field="origCurrencyDimId"/>
            <exclude field="productCategoryId"/>
            <exclude field="storeDimId"/>
            <exclude field="salesChannelEnumId"/>
            <exclude field="statusId"/>
            <exclude field="brand"/>
            <exclude field="pod"/>
            <exclude field="account"/>
            <exclude field="productPromoCode"/>
        </alias-all>
        <alias entity-alias="SOISS_SOIF" name="orderId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="orderItemSeqId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="organisationDimId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="storeDimId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="customerDimId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="productDimId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="productPromoCode" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="productCategoryId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="salesChannelEnumId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="statusId" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="brand" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="pod" group-by="true"/>
        <alias entity-alias="SOISS_SOIF" name="account" group-by="true"/>

        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_DD">
            <key-map field-name="orderDateDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_CD">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_CUSTD">
            <key-map field-name="customerDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_INTORGD">
            <key-map field-name="organisationDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_PD">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="SOISS_SOIF" rel-entity-alias="SOISS_STORED">
            <key-map field-name="storeDimId" rel-field-name="dimensionId"/>
        </view-link>
    </view-entity>

    <view-entity entity-name="InventoryItemStarSchema" package-name="org.apache.ofbiz.bi.starschema" title="Inventory Item Star Schema">
        <description>"Inventory Item StarSchema.</description>
        <member-entity entity-alias="IISS_IIF" entity-name="InventoryItemFact"/>
        <!--member-entity entity-alias="SIIF" entity-name="SalesOrderItemFact"/-->
        <member-entity entity-alias="IISS_FACILITY" entity-name="FacilityDimension"/>
        <member-entity entity-alias="IISS_INTORG" entity-name="OrganisationDimension"/>
        <member-entity entity-alias="IISS_PD" entity-name="ProductDimension"/>
        <member-entity entity-alias="IISS_IDD" entity-name="DateDimension"/>
        <member-entity entity-alias="IISS_CD" entity-name="CurrencyDimension"/>

        <alias-all entity-alias="IISS_IIF" function="sum">
            <exclude field="inventoryItemId"/>
            <exclude field="orderId"/>
            <exclude field="facilityDimId"/>
            <exclude field="organisationDimId"/>
            <exclude field="inventoryDateDimId"/>
            <exclude field="productDimId"/>
            <exclude field="origCurrencyDimId"/>
        </alias-all>
        <!--alias-all entity-alias="SIIF" function="sum">
            <exclude field="orderItemSeqId"/>
            <exclude field="orderDateDimId"/>
            <exclude field="productDimId"/>
            <exclude field="billToCustomerDimId"/>
            <exclude field="origCurrencyDimId"/>
            <exclude field="orderId"/>
            <exclude field="orderItemSeqId"/>
            <exclude field="orderStatus"/>
            <exclude field="saleChanel"/>
        </alias-all-->
        <alias-all entity-alias="IISS_PD" prefix="product" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="IISS_IDD" prefix="inventoryDate" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="IISS_CD" prefix="currency" group-by="true">
            <exclude field="dimensionId"/>
            <exclude field="currencyId"/>
        </alias-all>
        <alias-all entity-alias="IISS_FACILITY" prefix="wh" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias-all entity-alias="IISS_INTORG" prefix="intOrg" group-by="true">
            <exclude field="dimensionId"/>
        </alias-all>
        <alias entity-alias="IISS_IIF" name="inventoryItemId" group-by="true">
            <description>Inventory Item Id</description>
        </alias>
        <alias entity-alias="IISS_IIF" name="inventoryDateDimId" group-by="true">
            <description>DimensionId of the inventory date</description>
        </alias>
        <alias entity-alias="IISS_IIF" name="organisationDimId" group-by="true">
            <description>DimensionId of the internal organisation</description>
        </alias>
        <alias entity-alias="IISS_IIF" name="facilityDimId" group-by="true">
            <description>DimensionId of the facility</description>
        </alias>
        <alias entity-alias="IISS_IIF" name="productDimId" group-by="true">
            <description>DimensionId of the product</description>
        </alias>
        <alias entity-alias="IISS_IIF" name="origCurrencyDimId" group-by="true">
            <description>DimensionId of the currency</description>
        </alias>
        <view-link entity-alias="IISS_IIF" rel-entity-alias="IISS_PD" rel-optional="true">
            <key-map field-name="productDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="IISS_IIF" rel-entity-alias="IISS_FACILITY" rel-optional="true">
            <key-map field-name="facilityDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="IISS_IIF" rel-entity-alias="IISS_INTORG" rel-optional="true">
            <key-map field-name="organisationDimId" rel-field-name="dimensionId"/>
        </view-link>
        <!--view-link entity-alias="PD" rel-entity-alias="SIIF" rel-optional="true">
            <key-map field-name="dimensionId" rel-field-name="productDimId"/>
        </view-link-->
        <view-link entity-alias="IISS_IIF" rel-entity-alias="IISS_IDD">
            <key-map field-name="inventoryDateDimId" rel-field-name="dimensionId"/>
        </view-link>
        <view-link entity-alias="IISS_IIF" rel-entity-alias="IISS_CD">
            <key-map field-name="origCurrencyDimId" rel-field-name="dimensionId"/>
        </view-link>
    </view-entity>
</entitymodel>